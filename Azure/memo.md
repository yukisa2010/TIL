# Azure
## 準備
- 料金計算ツール
https://azure.microsoft.com/ja-jp/pricing/calculator/

- 予算、アラートの設定
    - 全てのサービス
    - サブスクリプション
    - 予算
    - 従量課金
    - ＋追加
    - =>メールで通知が届く

- リソースグループの作成
  - 用途・目的
    - ノードをあるグループでまとめることで、
    管理しやすくする
    - 課金明細にも記載されるので便利
  - 分類例
    - 開発・本番など環境を分ける
    - ライフサイクル >> ネットワーク関連・Webサーバー関連などで分ける
  - 命名
    - w-iaas-rg >> West Resource Group

## サーバー構築
English > JPN > Imaginized > instance

- Virtual Machines
  - 
## VMの起動と停止
- 停止ボタンを押すことで起動終了できる
  - その間、VMの課金は止まるが、OS・Storageなどは
  課金が続く
- 自動シャットダウンも設定できる
- 自動シャットダウン、保存ができない？
- PowerShellで日本語化
- モデル（イメージ）にする
  - RDP内で操作 > OSの停止
  - Azure上での操作

## イメージから仮想マシンを作成する


## 仮想ネットワークとサブネットの作成

## NSGとサブネットへ関連付け
  - 「nsg」で検索
  - NSGの作成
    - 受信セキュリティ規制を設定
  - サブネットと関連付け
    - HTTPとリモートデスクトップだけに限定

## 可用性セットの作成
## ストレージアカウントの作成
## Webサーバ用の仮想マシンを作成
## サーバーのスケール変更
- スケールアウト→台数を増やす
- スケールアップ→スペックを上げる
- サイズ変更時は電源を切った方がよい

## サーバー接続
- サーバー構築
- HTMLファイルの配置
- ローカルPCに戻ってブラウザでIPアドレスを入力

## ロードバランサの作成
- ロードバランサー
  - バックエンドプール
  - 正常性プローブ
  - 負荷分散規則
  - NA規則 > Port番号でRDPを起動

# Storage
## AzureStorageの種類
- Blob > テキストデータ・音声データなど
  - オブジェクトストレージ
- File > よくあるファイルストレージ
- Table > キーバリュー型・リレーションは無し
- Que > ノード間の非同期通信

## Blobについて
### Blobストレージの構成
- ストレージアカウント
  - コンテナー
    - Blob

## Azure Storage Explorer
- Azure Storage Explorerで検索 > インストール
- ドラッグ＆ドロップで保存
- ストレージアカウントから参照・編集
- ※フォルダ内にファイルが入っていないと無効化される

## VMScale 
VMと過負荷バランスなどを自動で作成してくれる

## 



## まとめ
- 予算の作成
- リソースグループの作成
  - その中にVirtual Machineの作成

- => NetworkWatcherRG

## Tips 2020/11/24
- NSG
  - ICMPはデフォルトで許可されていない
