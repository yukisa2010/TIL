# HTTPでやりとりする仕組み

## HTTPメッセージ
- HTTP from 1991
## HTTPリクエスト/HTTPレスポンス
- HTTPリクエスト
  - リクエスト行
    - GET /index.html HTTP/1.1 >>メソッド・パス名・バージョン
  - メッセージヘッダー(HTTPヘッダー)
    - Webブラウザの種類・データタイプ・圧縮方法・言語
  - 空白行
  - メッセージボディ
- HTTPレスポンス
  - ステータス行
    - HTTP/1.1 200 OK >>バージョン・ステータスコード/テキストフレーズ
  - メッセージヘッダー
  - 空白行 
  - メッセージボディー  
## HTTPメソッド
- GET
- POST
  - 情報をメッセージボディに記録して送信する
- PUT/DELETEはデータの改変が行えるのでサーバーで制限している場合も

## ステータスコード
- 1xx 情報
  - リクエスト処理中など
- 2xx 成功
- 3xx 転送
- 4xx Client Error
  - リクエストされたHTMLファイルが存在しないなど
- 5xx Server Error
  - 高負荷状態で一時的に表示できないなど
  
## TCPによるデータ通信
リクエスト・レスポンスの際の通信確保
- SYNパケット
  - クライアントからサーバーへ接続を要求するため
- ACKパケット
  - 接続の許可・切断の許可

## HTTP/1.1のやりとり
- HTTPキープアライブ
  - 画像の取得/繋げたまま
  - HTTP/1.1から登場
- HTTPパイプライン
  - responseを待つことなく次のrequestを送信できる
  - ただし、requestの順番通りにrequestを返さなければならない
## HTTP/2のやりとり
- Googleの提案したSPDYという通信の高速化を目的としたプロトコル
- ストリーム 一つのTCPコネクションに複数の仮想通信経路（ストリーム）
## HTTP/2での改良点(HTTP/1.0からの)
- テキスト形式 => バイナリ形式へ
  - 処理時間短縮・ブラウザ/サーバーへの負荷軽減
  - ヘッダーとボディがフレームという単位で分割される
- ヘッダー圧縮
  - HPACK => ヘッダー情報から差分だけを送る
- サーバープッシュ
  - ブラウザからHTMLをrequestした際、画像データをrequestされなくても事前にブラウザへ送信する

## HTTPSの仕組み
- HTTP over SSLT/TLS
  - SSL(Secure Sockets Layer)
  - TSL(Transport Layer Security)
- 安全性を確保する仕組み
  - 盗聴防止（暗号化通信）
  - 改ざん防止
    - メッセージダイジェスト
      - ハッシュ値を取り出し比較して改ざんを検知する
  - なりすまし防止
    - SSLサーバー証明書
      - 会社の身元確認、認証局による認証作業を通過
      - ランクがある（最高位だと緑で表示）
  
